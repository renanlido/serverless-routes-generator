{"version":3,"sources":["../bin/cli.ts"],"sourcesContent":["import { exec } from 'child_process';\nimport fs from 'fs';\nimport path from 'path';\nimport { Command } from 'commander';\n\nconst program = new Command();\n\nprogram\n  .name('serverless-routes-generator')\n  .description('Simplify route creation for Serverless applications')\n  .version('1.0.0');\n\nprogram\n  .command('generate')\n  .description('Generate serverless routes')\n  .action(() => {\n    const scriptPath = path.resolve(__dirname, './index.js')\n\n    exec(`npx tsx ${scriptPath}`, (error, stdout, stderr) => {\n      if (error) {\n        console.error(`Erro ao executar o comando: ${error.message}`);\n        process.exit(1);\n      }\n      if (stderr) {\n        console.error(`Stderr: ${stderr}`);\n        process.exit(1);\n      }\n      console.log(stdout);\n    });\n  });\n\n  program\n  .command('init')\n  .description('Cria um arquivo de configuração padrão no diretório raiz')\n  .action(() => {\n    const configContent = `module.exports = {\n  pathPattern: \"modules/**/handler.ts\",\n  projectRoot: \"example/src\",\n  generatedFileName: \"serverless-route\",\n};`;\n\n    const configFileName = 'serverless-route.config.js';\n\n    const configFilePath = path.resolve(process.cwd(), configFileName);\n\n    if (fs.existsSync(configFilePath)) {\n      console.error(`O arquivo \"${configFileName}\" já existe no diretório raiz.`);\n      process.exit(1);\n    }\n\n    fs.writeFile(configFilePath, configContent, 'utf8', (err) => {\n      if (err) {\n        console.error(`Erro ao criar o arquivo de configuração: ${err.message}`);\n        process.exit(1);\n      }\n      console.log(`Arquivo de configuração \"${configFileName}\" criado com sucesso no diretório raiz.`);\n    });\n  });\n\n\nprogram.parse(process.argv);\n\n// If no arguments are provided, display help\nif (!process.argv.slice(2).length) {\n  program.outputHelp();\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2BAAqB;AACrB,gBAAe;AACf,kBAAiB;AACjB,uBAAwB;AAExB,IAAMA,UAAU,IAAIC,yBAAAA;AAEpBD,QACGE,KAAK,6BAAA,EACLC,YAAY,qDAAA,EACZC,QAAQ,OAAA;AAEXJ,QACGK,QAAQ,UAAA,EACRF,YAAY,4BAAA,EACZG,OAAO,MAAA;AACN,QAAMC,aAAaC,YAAAA,QAAKC,QAAQC,WAAW,YAAA;AAE3CC,iCAAK,WAAWJ,UAAAA,IAAc,CAACK,OAAOC,QAAQC,WAAAA;AAC5C,QAAIF,OAAO;AACTG,cAAQH,MAAM,+BAA+BA,MAAMI,OAAO,EAAE;AAC5DC,cAAQC,KAAK,CAAA;IACf;AACA,QAAIJ,QAAQ;AACVC,cAAQH,MAAM,WAAWE,MAAAA,EAAQ;AACjCG,cAAQC,KAAK,CAAA;IACf;AACAH,YAAQI,IAAIN,MAAAA;EACd,CAAA;AACF,CAAA;AAEAb,QACCK,QAAQ,MAAA,EACRF,YAAY,sEAAA,EACZG,OAAO,MAAA;AACN,QAAMc,gBAAgB;;;;;AAMtB,QAAMC,iBAAiB;AAEvB,QAAMC,iBAAiBd,YAAAA,QAAKC,QAAQQ,QAAQM,IAAG,GAAIF,cAAAA;AAEnD,MAAIG,UAAAA,QAAGC,WAAWH,cAAAA,GAAiB;AACjCP,YAAQH,MAAM,cAAcS,cAAAA,sCAA8C;AAC1EJ,YAAQC,KAAK,CAAA;EACf;AAEAM,YAAAA,QAAGE,UAAUJ,gBAAgBF,eAAe,QAAQ,CAACO,QAAAA;AACnD,QAAIA,KAAK;AACPZ,cAAQH,MAAM,kDAA4Ce,IAAIX,OAAO,EAAE;AACvEC,cAAQC,KAAK,CAAA;IACf;AACAH,YAAQI,IAAI,kCAA4BE,cAAAA,4CAAuD;EACjG,CAAA;AACF,CAAA;AAGFrB,QAAQ4B,MAAMX,QAAQY,IAAI;AAG1B,IAAI,CAACZ,QAAQY,KAAKC,MAAM,CAAA,EAAGC,QAAQ;AACjC/B,UAAQgC,WAAU;AACpB;","names":["program","Command","name","description","version","command","action","scriptPath","path","resolve","__dirname","exec","error","stdout","stderr","console","message","process","exit","log","configContent","configFileName","configFilePath","cwd","fs","existsSync","writeFile","err","parse","argv","slice","length","outputHelp"]}